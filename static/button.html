<!DOCTYPE html>
<html>
<head>
    <title>475 Plays Helicopter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="reset.css">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="touch-area">

    </div><!-- end touch area -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/static/clientSocketController.js" type="text/javascript"></script>
    <script src="clientSocketInfo.js"></script> <!-- need for knowing how many players -->
    <script src="main.js"></script>

    <script>

        var isPressed = false;

        /* re-direct if more than 1 player navigated to game's url */
        var players = (new serverInfo(socket)).getNumPlayers()
        if (players > 1)
            location.replace("http://www.google.com")

    </script>

    <script>
        // Hides mobile browser's address bar when page is done loading.
        window.addEventListener('load', function(e) {
            setTimeout(function() { window.scrollTo(0, 1); }, 1);
        }, false);

        //Prevents scrolling and stops iOS scrollover bounce effect
        document.body.addEventListener('touchmove', function(event) {
            event.preventDefault();
        }, false); 

        //Adds event handlers for touching the touch area
        var touchArea = document.getElementById('touch-area');
        var touchStartHandler = function(event){
                touchArea.innerHTML = "Flying";
                alert('flying');
                if (isPressed === false) changeState();  
        }
        var touchEndHandler = function(event){
            if(event.targetTouches.length === 0) {
                touchArea.innerHTML = "Not flying";
                if (isPressed === true) changeState();
            }  
        }

        var changeState = function(){
            if (isPressed === false){
                alert('pressed');
                isPressed = true;
                controller.pressButton();
            } else {
                isPressed = false;
                controller.depressButton();
            }
        }
        touchArea.addEventListener('touchstart', touchStartHandler, false);
        touchArea.addEventListener('touchend', touchEndHandler, false);

    </script>
</body>
</html>